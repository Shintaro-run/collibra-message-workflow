# ğŸ’¬ Message Workflow V2 - Collibra SaaSå‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

A simple Q&A workflow for Collibra SaaS - ask questions, get answers, done! âœ¨

## ğŸ¯ What Does It Do?

This workflow lets anyone in your organization:
- ğŸ“ Post questions about data assets from Actions button
- ğŸ’¬ Chat back and forth with data stewards (bidirectional messaging)
- ğŸ”” Get email notifications
- â° Auto-escalate if no one responds
- ğŸ†™ Manual escalation to different groups
- ğŸ“Œ Save conversation history automatically on assets
- ğŸ“Š Track status: New â†’ In Progress â†’ Closed

## ğŸŒŸ ä¸»è¦æ©Ÿèƒ½ (Key Features)

| Feature | Description |
|---------|-------------|
| ğŸ’¬ **åŒæ–¹å‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°** | é€ä¿¡è€…â‡”å—ä¿¡è€…ã‚°ãƒ«ãƒ¼ãƒ—é–“ã§ç„¡åˆ¶é™ã«ä¼šè©±å¯èƒ½ |
| ğŸ†™ **ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½** | å—ä¿¡è€…ãŒåˆ¥ã‚°ãƒ«ãƒ¼ãƒ—ã¸æ‰‹å‹•è»¢é€å¯èƒ½ |
| â° **è‡ªå‹•ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** | 7æ—¥é–“ç„¡å¿œç­”ã§è‡ªå‹•çš„ã«ä¸Šä½ã‚°ãƒ«ãƒ¼ãƒ—ã¸ |
| ğŸ“§ **ãƒ¡ãƒ¼ãƒ«é€šçŸ¥** | å…¨å‚åŠ è€…ã¸è‡ªå‹•é€šçŸ¥ |
| ğŸ’¾ **ä¼šè©±å±¥æ­´ã®è‡ªå‹•è¨˜éŒ²** | ã‚¢ã‚»ãƒƒãƒˆã‚³ãƒ¡ãƒ³ãƒˆã¨ã—ã¦å®Œå…¨ä¿å­˜ |
| ğŸ“Š **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†** | New â†’ In Progress â†’ Closed ã®çŠ¶æ…‹é·ç§» |
| ğŸ¯ **Actionsãƒœã‚¿ãƒ³å¯¾å¿œ** | ã‚¢ã‚»ãƒƒãƒˆè©³ç´°ç”»é¢ã‹ã‚‰ç›´æ¥èµ·å‹•å¯èƒ½ |

## âš¡ Quick Start

### 1ï¸âƒ£ Upload to Collibra
```
Settings â†’ Workflows â†’ Definitions â†’ Upload Workflow
```
Choose: `workflow/message-workflow-practical.bpmn`

**é‡è¦:** ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã€å¿…ãš **Enable** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼

### 2ï¸âƒ£ Refresh Browser
ãƒ–ãƒ©ã‚¦ã‚¶ã‚’å®Œå…¨ã«ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥:
- Windows: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

**Note:** ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ãªã„ã¨Actionsãƒœã‚¿ãƒ³ã«è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“

### 3ï¸âƒ£ Start Using!

**æ–¹æ³•1: Actionsãƒœã‚¿ãƒ³ã‹ã‚‰ (æ¨å¥¨)**
1. ä»»æ„ã®ã‚¢ã‚»ãƒƒãƒˆè©³ç´°ç”»é¢ã‚’é–‹ã
2. å³ä¸Šã® **Actions** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **Message Workflow** ã‚’é¸æŠ

**æ–¹æ³•2: Start Workflowã‹ã‚‰**
1. Click **Start Workflow** â†’ Choose **Message Workflow**

Fill in:
- ğŸ“‹ Title (ã‚¿ã‚¤ãƒˆãƒ«)
- âœï¸ Your question (è³ªå•å†…å®¹)
- âš¡ Priority (High/Medium/Low)
- ğŸ·ï¸ Category (Question/Issue/Other)
- ğŸ¯ Related Asset (é–¢é€£ã‚¢ã‚»ãƒƒãƒˆ - Actionsã‹ã‚‰èµ·å‹•æ™‚ã¯è‡ªå‹•å…¥åŠ›)
- ğŸ‘¥ Recipient Group (å—ä¿¡è€…ã‚°ãƒ«ãƒ¼ãƒ—)
- ğŸ†™ Escalation Group (ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å…ˆã‚°ãƒ«ãƒ¼ãƒ—)

Done! ğŸ‰

## ğŸ­ How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Posts  â”‚
â”‚  Question   â”‚
â”‚ (Actions)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Receiver   â”‚ â†â†’   â”‚    Sender    â”‚
â”‚   Group     â”‚      â”‚  (You!)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â†‘
       â†“                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ Escalation  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   Group     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Resolved!  â”‚
â”‚   Closed    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ’¡ Tip:** If receiver doesn't respond in 7 days, workflow auto-escalates!

## âš™ï¸ å—ä¿¡è€…ã‚°ãƒ«ãƒ¼ãƒ—ã®è¨­å®šæ–¹æ³•

### æ–¹æ³•1: BPMNãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›† (æ¨å¥¨)

`workflow/message-workflow-practical.bpmn` ã® **Line 34** ã‚’ç·¨é›†:

```xml
<!-- Before -->
<activiti:formProperty id="recipientGroup" name="Recipient Group"
  type="string" required="true" default="Data_Stewards"/>

<!-- After (your group name) -->
<activiti:formProperty id="recipientGroup" name="Recipient Group"
  type="string" required="true" default="Your_Group_Name"/>
```

**é‡è¦:** ã‚°ãƒ«ãƒ¼ãƒ—åã¯å®Œå…¨ä¸€è‡´ãŒå¿…è¦ï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ãªã©ï¼‰

### æ–¹æ³•2: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹æ™‚ã«æŒ‡å®š

æ¯å›ãƒ•ã‚©ãƒ¼ãƒ ã§å—ä¿¡è€…ã‚°ãƒ«ãƒ¼ãƒ—ã‚’é¸æŠã§ãã¾ã™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã™ï¼‰

## ğŸ”§ ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å…ˆã‚°ãƒ«ãƒ¼ãƒ—ã‚‚Line 35ã§è¨­å®šå¯èƒ½:

```xml
<activiti:formProperty id="escalationGroup" name="Escalation Group"
  type="string" required="false" default="Data_Governance_Council"/>
```

## ğŸ“š Documentation

Need more details? Check these guides:

| Document | What's Inside |
|----------|---------------|
| ğŸ“– [Installation Guide](docs/INSTALLATION.md) | Step-by-step setup |
| âš™ï¸ [Configuration Guide](docs/CONFIGURATION.md) | Customize settings |
| ğŸ—ï¸ [Architecture Guide](docs/ARCHITECTURE.md) | Technical details |
| ğŸ“ [Usage Scenarios](examples/usage-scenarios.md) | How to use it |
| ğŸ¨ [Config Examples](examples/configuration-examples.md) | Real-world setups |

## ğŸ® Example Usage

**Sarah needs help (from Actions button):**
```
1. Opens "Customer Data" asset
2. Clicks Actions â†’ Message Workflow
3. Title: "How do I update asset attributes?"
4. Message: "Can't find the edit button..."
5. Priority: Medium
â†’ Data Stewards get email
â†’ John replies: "You need Edit permission"
â†’ Sarah: "Thanks! It works now!"
â†’ Closed âœ“
â†’ Complete conversation saved as asset comments
```

**Tom has urgent issue with escalation:**
```
Title: "Data quality issue - null emails"
Priority: High
â†’ Data Steward investigates
â†’ Can't solve alone â†’ Escalates to DBA Team
â†’ DBA Team provides solution
â†’ Multiple messages back and forth
â†’ Solution found
â†’ Closed âœ“
```

## ğŸ› ï¸ Technical Specs

**Built With:**
- ğŸ”§ BPMN 2.0
- ğŸŒŠ Activiti Engine (Collibra API v2)
- ğŸ¯ Collibra SaaS (tested on 5.x)

**Contains:**
- 1 Start Event (with formKey="resource")
- 3 Script Tasks
- 10 Service Tasks
- 3 User Tasks
- 7 Gateways
- 33 Flows
- 1 End Event

**API Compatibility:**
- Uses `activiti` namespace (API v2 compatible)
- Supports resource-based workflow launch
- Full Collibra SaaS integration

## ğŸš€ Features at a Glance

âœ… Launch from Actions button on any asset
âœ… Bidirectional messaging (unlimited replies)
âœ… Manual escalation to different groups
âœ… Auto-escalation after 7 days
âœ… Email notifications to all participants
âœ… Complete conversation history on assets
âœ… Status tracking (New/In Progress/Closed)
âœ… Works with any asset type
âœ… No training needed

## ğŸ’¡ Use Cases

- â“ "How do I...?" questions from asset context
- ğŸ› Report data quality issues for specific assets
- ğŸ“‹ Request access or changes with full context
- ğŸ’¬ Discuss data governance topics
- ğŸ¤ Collaborate on specific data assets
- ğŸ†™ Escalate complex issues to appropriate teams

## ğŸ¯ Who Is This For?

**Perfect for organizations that want:**
- Centralized Q&A system with asset context
- Better communication between users & data teams
- SLA-based escalation with manual override
- Complete audit trails on assets
- Simple workflow without complex setup
- Actions button integration for easy access

## ğŸ“¦ Project Structure

```
collibra-message-workflow/
â”œâ”€â”€ ğŸ“„ README.md                           â† You are here!
â”œâ”€â”€ ğŸ“ workflow/
â”‚   â”œâ”€â”€ message-workflow-practical.bpmn   â† V2 (Recommended)
â”‚   â””â”€â”€ message-workflow.bpmn             â† V1 (Legacy)
â”œâ”€â”€ ğŸ“ docs/
â”‚   â”œâ”€â”€ INSTALLATION.md                   â† Setup guide
â”‚   â”œâ”€â”€ CONFIGURATION.md                  â† Config reference
â”‚   â””â”€â”€ ARCHITECTURE.md                   â† Technical docs
â””â”€â”€ ğŸ“ examples/
    â”œâ”€â”€ configuration-examples.md         â† Config scenarios
    â””â”€â”€ usage-scenarios.md                â† How-to guides
```

## ğŸ“ Quick Tips

ğŸ’¡ **Launch from Actions button:**
- Context is automatically captured
- Related asset auto-populated
- Faster than Start Workflow menu

ğŸ’¡ **Choose the right priority:**
- ğŸ”´ High: Blocking work, urgent
- ğŸŸ¡ Medium: Important, not urgent
- ğŸŸ¢ Low: Nice to know

ğŸ’¡ **Use escalation wisely:**
- Manual: When you need different expertise
- Auto: Safety net for forgotten questions

ğŸ’¡ **Use clear titles:**
- âœ… "How to assign data owners to this table?"
- âŒ "Help needed"

## ğŸ¤” FAQ

**Q: Can anyone start this workflow?**
A: Yes! Any logged-in Collibra user (if workflow is enabled).

**Q: How do I make it appear in Actions button?**
A: Upload the workflow, click Enable, then refresh browser (Ctrl+Shift+R or Cmd+Shift+R).

**Q: What happens if no one responds?**
A: Auto-escalates after 7 days to escalation group.

**Q: Can I change the escalation time?**
A: Yes, edit the boundary timer in BPMN line 120 (default: `<timeDuration>P7D</timeDuration>`).

**Q: Can receiver send it to a different team?**
A: Yes! Use the "Escalate" action and specify escalation reason.

**Q: Can conversations go back and forth?**
A: Yes! Unlimited replies until someone closes it.

**Q: Where is conversation history saved?**
A: All messages are saved as comments on the related asset (if specified).

## âš ï¸ æ—¢çŸ¥ã®å•é¡Œ (Known Issues)

### API v1 Warning Message

**Issue:**
Collibraç”»é¢ã«API v1ã®è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
```
"Workflow uses deprecated API v1"
```

**Impact:**
- âš ï¸ è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ï¼ˆæ©Ÿèƒ½ã«ã¯å½±éŸ¿ãªã—ï¼‰
- âœ… ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯æ­£å¸¸ã«å‹•ä½œã—ã¾ã™
- âœ… ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½ã§ã™

**Reason:**
- ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯`activiti` namespaceï¼ˆAPI v2å¯¾å¿œï¼‰ã‚’ä½¿ç”¨
- Collibraã®è­¦å‘Šæ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã®èª¤æ¤œçŸ¥ã®å¯èƒ½æ€§
- ã¾ãŸã¯ä¸€éƒ¨ã®ãƒ¬ã‚¬ã‚·ãƒ¼æ©Ÿèƒ½ã¨ã®äº’æ›æ€§ç¶­æŒã®ãŸã‚

**Action Required:**
- ğŸŸ¢ ç‰¹ã«å¯¾å¿œä¸è¦
- å‹•ä½œã«å•é¡ŒãŒã‚ã‚‹å ´åˆã®ã¿ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡

### Collibra Version Compatibility

**Tested:**
- âœ… Collibra SaaS 5.x (æ¨å¥¨)
- âœ… Collibra 2024.05+

**Not Tested:**
- âš ï¸ Collibra 6.0ä»¥é™ã®å‹•ä½œã¯æœªä¿è¨¼
- APIä»•æ§˜å¤‰æ›´ã«ã‚ˆã‚Šå‹•ä½œã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

**Future Support:**
- Collibra 6.0å¯¾å¿œç‰ˆã¯åˆ¥é€”æä¾›äºˆå®š
- å¿…è¦ã«å¿œã˜ã¦BPMNæ›´æ–°ã‚’æ¤œè¨

### Other Known Limitations

- Email notifications require SMTP server configuration
- Group names must match exactly (case-sensitive)
- Browser refresh required after enabling workflow

## ğŸ› Troubleshooting

| Issue | Solution |
|-------|----------|
| Actions button ã«è¡¨ç¤ºã•ã‚Œãªã„ | Enableå¾Œã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’Ctrl+Shift+Rã§ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ |
| Can't find workflow | Check it's enabled in Settings â†’ Workflows |
| No email notifications | Verify email server configured in Settings |
| Can't upload BPMN | Check Collibra version (needs 2024.05+ or SaaS 5.x) |
| Groups not working | Verify group names are exact match (case-sensitive) |
| API v1 warning appears | Ignore - workflow uses v2, warning is false positive |
| Workflow doesn't start | Check user has permission to start workflows |
| Related asset not populated | Make sure you launched from Actions button |

## ğŸ“ Need Help?

Check the detailed guides in the `docs/` folder:
- ğŸ†˜ Installation issues â†’ [INSTALLATION.md](docs/INSTALLATION.md)
- âš™ï¸ Configuration help â†’ [CONFIGURATION.md](docs/CONFIGURATION.md)
- ğŸ—ï¸ Technical questions â†’ [ARCHITECTURE.md](docs/ARCHITECTURE.md)

## ğŸ”„ Version History

**V2 (message-workflow-practical.bpmn) - Current**
- âœ… Actions button integration (formKey="resource")
- âœ… Activiti namespace (API v2)
- âœ… Default recipient group setting
- âœ… Complete escalation implementation
- âœ… Enhanced conversation history

**V1 (message-workflow.bpmn) - Legacy**
- Basic workflow functionality
- Start Workflow menu only
- Flowable namespace

## ğŸ‰ That's It!

Simple, right? Upload, enable, refresh, and start chatting from any asset!

Questions? Click Actions on any asset and ask! ğŸ˜„

---

**Version:** 2.0.0 (Practical)
**License:** For use with Collibra Data Intelligence Platform
**Compatibility:** Collibra SaaS 5.x, Collibra 2024.05+
**API:** Activiti (v2 compatible)

Made with â¤ï¸ for better data collaboration
